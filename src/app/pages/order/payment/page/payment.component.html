<div class="stepsdemo-content">
    <p-card>
        <ng-template pTemplate="title">
            Detalles De La Compra
        </ng-template>
        <ng-template pTemplate="subtitle">
            Datos Personales
        </ng-template>
        <ng-template pTemplate="content">
            <div class="flex flex-column">
                <div class="">
                    <label for="name">Nombres y Apellidos: </label>
                    <b> {{user.user_name}} {{user.user_lastName}}</b>
                </div>
                <div class="mt-2">
                    <label for="Age">{{typeDocument}}: </label>
                    <b> {{user.user_document}}</b>
                </div>
                <div class="mt-2">
                    <label for="Age">Direcci√≥n:</label>
                    <b> {{addressOrder}}</b>
                </div>
                <div class="mt-2">
                    <label for="Age">Lugar de Referencia: </label>
                    <b> {{user.user_address_reference}}</b>
                </div>
                <div class="mt-2">
                    <label for="Age">Celular:</label>
                    <b> {{user.user_phone}}</b>
                </div>
            </div>
            <p-divider></p-divider>

            <div>
                <p-table [value]="products" responsiveLayout="scroll">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Imagen</th>
                            <th>Nombre</th>
                            <th>Precio Unitario</th>
                            <th>Valor Descuento</th>
                            <th>Parcial</th>
                            <th>Cantidad</th>
                            <th>Subtotal</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-product>
                        <tr>
                            <td>
                                <img [src]="product.product_image == null || !product.product_image ? overImage : host+product.product_image" [alt]="product.product_name" width="75px">
                            </td>
                            <td style="width: 250px;">
                                {{product.product_name}}
                                <ng-template [ngIf]="product.product_offered">
                                    <div class="discount__product">
                                        <p>-{{product.product_offered}}%</p>
                                    </div>
                                </ng-template>
                            </td>
                            <td>${{product.product_price_aux}}</td>
                            <td>${{product.product_offered == null || !product.product_offered ? '0.00' : ( product.product_price_aux * (product.product_offered / 100)).toFixed(2)}}</td>
                            <td>${{!product.productWithDiscount ? product.product_price_aux : product.productWithDiscount}}</td>
                            <td>{{product.product_amount_sail}}</td>
                            <td>${{product.product_price_amount.toFixed(2)}}</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="summary">
                        <div class="flex flex-column align-items-end justify-content-end">
                            <div class="flex">
                                <p>Subtotal:</p>
                                <span style="font-weight: lighter;" class="ml-2">${{order.price_order_total}}</span>
                            </div>
                            <div class="flex">
                                <p>Iva 0%: </p>
                                <span style="font-weight: lighter;" class="ml-2">$0.00</span>
                            </div>
                            <div class="flex">
                                <p>Iva {{iva}}%: </p>
                                <span style="font-weight: lighter;" class="ml-2">${{priceIva.toFixed(2)}}</span>
                            </div>
                            <div style="width: 150px;height: 2px; background-color: black;"></div>
                            <div class="flex">
                                <p>Precio Total: </p>
                                <span style="font-weight: lighter;" class="ml-2">${{priceTotalOrder}}</span>
                            </div>
                        </div>
                    </ng-template>
                </p-table>
            </div>
        </ng-template>
        <ng-template pTemplate="footer">
            <div class="grid grid-nogutter justify-content-between">
                <p-button label="Regresar" (onClick)="prevPage()" icon="pi pi-angle-left"></p-button>
                <p-button label="Siguiente" (onClick)="nextPage()" icon="pi pi-angle-right" iconPos="right"></p-button>
            </div>
        </ng-template>
    </p-card>
</div>

<app-overlay-request
    [showOverlay]="showOverlay"
    [loadRequest]="loadRequest"
    [iconResponse]="iconResponse"
    [textResponse]="textResponse!"
    [showButtons]="showButtons"
    [showButtonDynamic]="showButtonDynamic"
    [url]="url"
    [iconButton]="iconButton"
    [productsError]="productsError"
    [textOverlay]="textOverlay"
    [textButton]="textButton"
    [isButtonHome]="isButtonHome"
    [existProducstError]="existProducstError"
    [isChangePromotion]="isChangePromotion"
    [isStockError]="isStockError"
    [textHeaderModal]="textHeaderModal"
></app-overlay-request>