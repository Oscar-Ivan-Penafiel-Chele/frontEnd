<p-dialog header="Confirmar orden de pago" [(visible)]="displayModal" (onHide)="resetModal()" [modal]="true" [breakpoints]="{'960px': '90vw'}" [style]="{width: '75vw'}" [maximizable]="true"
            [draggable]="false" [resizable]="false">
    
<p-toolbar styleClass="mb-4">
    <ng-template pTemplate="left">
        <p class="infor__provider"><i class="pi pi-user mr-1"></i>Proveedor:<span class="pl-2">{{informationProvider!.provider_name}}</span></p>
    </ng-template>
</p-toolbar>

<p-table #productTable [value]="productsPurchaseOrder" editMode="row" styleClass="p-datatable-sm" [rows]="5" [paginator]="true" [globalFilterFields]="['producto.product_name']" responsiveLayout="stack" [rowHover]="true"
    currentPageReportTemplate="" [showCurrentPageReport]="true">
    <ng-template pTemplate="caption">
        <div class="flex flex-wrap align-items-center justify-content-between pb-2 pt-2">
            <div>
                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input pInputText style="width: 300px;" type="text" (input)="productTable.filterGlobal($any($event.target).value, 'contains')" placeholder="Buscar producto" />
                </span>
            </div>
        </div>

    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th><i class="pi pi-check-square"></i></th>
            <th pSortableColumn="provider.provider_name"><i class="pi pi-user"></i> Producto<p-sortIcon field="provider.provider_name"></p-sortIcon></th>
            <th pSortableColumn="status"><i class="pi pi-box"></i> Cantidad <p-sortIcon field="status"></p-sortIcon></th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product let-columns="columns" let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="product">
            <td><span class="p-column-title"><i class="pi pi-check-square"></i></span>
                <p-checkbox name="product.producto.product_name" [value]="product" (onChange)="changeStyle($event, product)" [(ngModel)]="selectedProducts"></p-checkbox>
            </td>
            <td><span class="p-column-title"><i class="pi pi-user"></i> Producto: </span> <p class="item__table__product">{{product.producto.product_name}}</p></td>
            <td><span class="p-column-title"><i class="pi pi-box"></i> Cantidad: </span> 
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-inputNumber [(ngModel)]="product.purchase_order_products_amount" [size]="2" mode="decimal" [minFractionDigits]="2" [maxFractionDigits]="2" [showButtons]="true" inputId="minmax-buttons" [min]="0">
                        </p-inputNumber>
                    </ng-template>
                    <ng-template pTemplate="output">
                        <p class="item__table__amount">{{product.purchase_order_products_amount}}</p>
                    </ng-template>
                </p-cellEditor>
            </td>
            <td style="text-align:center">
                <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(product)" class="p-button-rounded p-button-text"></button>
                <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(product)" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onRowEditCancel(product, ri)" class="p-button-rounded p-button-text p-button-danger"></button>
            </td>
        </tr>
    </ng-template>
</p-table>

    <ng-template pTemplate="footer">
        <p-button icon="pi pi-times" (click)="resetModal()" label="Cancelar" styleClass="p-button-text p-button-danger"></p-button>
        <p-button icon="pi pi-check" (click)="saveData()" label="Confirmar" styleClass="p-button-text"></p-button>
    </ng-template>
</p-dialog>
