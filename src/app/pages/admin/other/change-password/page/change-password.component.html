<p-toast></p-toast>
<p-card>
    <ng-template pTemplate="header">
        <p class="header__card"><i class="pi pi-lock"></i> Cambiar Contraseña</p>
    </ng-template>

    <div class="flex flex-column" style="padding: 0px 120px;">
        <div style="width: 100%;" class="mb-3">
            <label class="label__title" for="">1. Contraseña Actual</label>
            <p-password [(ngModel)]="passwordCurrent"  placeholder="Ingrese Contraseña Actual" [toggleMask]="true" [feedback]="false" [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}">
            </p-password>
            <small class="p-error flex justify-content-start" *ngIf="submitted && !passwordCurrent">Contraseña Actual es requerida</small>
        </div>
        <div class="mb-3">
            <label class="label__title" for="">2. Contraseña Nueva</label>
            <p-password [(ngModel)]="password" placeholder="Ingrese Contraseña Nueva" [toggleMask]="true" [feedback]="true" [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}">
                <ng-template pTemplate="header">
                    <p class="title-sugerencias">Ingresa tu contraseña</p>
                </ng-template>
                <ng-template pTemplate="footer">
                    <p-divider></p-divider>
                    <p class="sugerencias-content">Sugerencias :</p>
                    <ul class="sugerencias-list">
                        <li>Al menos una minúscula</li>
                        <li>Al menos una mayúscula</li>
                        <li>Al menos un número</li>
                        <li>Mínimo 8 caracteres</li>
                    </ul>
                </ng-template>
            </p-password>
            <small class="p-error flex justify-content-start" *ngIf="submitted && !password">Contraseña Nueva es requerido</small>
            <small class="p-error flex justify-content-start" *ngIf="password.length < 9 && password">Contraseña es muy corta</small>
            <small class="p-error" *ngIf="!validatePasswordRegex(passwordConfirm) && validateMatchPassword() && submitted">Contraseña no es segura</small>
        </div>
        <div class="mb-3">
            <label class="label__title" for="">3. Confirmación de Contraseña Nueva</label>
            <p-password required [(ngModel)]="passwordConfirm" placeholder="Confirmar Contraseña Nueva" [toggleMask]="true" [feedback]="true" [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}">
                <ng-template pTemplate="header">
                    <p class="title-sugerencias">Ingresa tu contraseña</p>
                </ng-template>
                <ng-template pTemplate="footer">
                    <p-divider></p-divider>
                    <p class="sugerencias-content">Sugerencias :</p>
                    <ul class="sugerencias-list">
                        <li>Al menos una minúscula</li>
                        <li>Al menos una mayúscula</li>
                        <li>Al menos un número</li>
                        <li>Mínimo 8 caracteres</li>
                    </ul>
                </ng-template>
            </p-password>
            <small class="p-error flex justify-content-start" *ngIf="submitted && !passwordConfirm">Confirmación de contraseña es requerida</small>
            <small class="p-error flex justify-content-start" *ngIf="passwordConfirm.length < 9 && passwordConfirm">Confirmación de contraseña es muy corta</small>
            <small class="p-error" *ngIf="!validatePasswordRegex(passwordConfirm) && validateMatchPassword() && submitted">Contraseña no es segura</small>
        </div>
        <small class="p-error flex justify-content-start" *ngIf="!validateMatchPassword() && submitted">Contraseña nueva y contraseña de confirmación no coinciden</small>
    </div>

    <div class="grid p-fluid justify-content-center mt-3">
        <div class="col-7">
            <button id="btnLogin" class="button-login" [disabled]="!validateMatchPassword() || !validateInput()" [loading]="loading" (click)="changePassword()" pButton pRipple type="button">
                <p [hidden]="!isVisibleText" style="width: 100%;">Cambiar Contraseña</p>
                <p [hidden]="isVisibleText" style="width: 48%;"></p>
            </button>
        </div>
    </div>
</p-card>

<app-overlay-change-password [isLoading]="isLoading" [isShow]="isShow"></app-overlay-change-password>
